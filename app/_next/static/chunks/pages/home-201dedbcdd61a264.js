(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{4378:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/home",function(){return n(5817)}])},5817:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var s=n(4246),a=n(7378),r=n(8038),o=n.n(r),c=n(5353),l=n(6034);let i={apiKey:"AIzaSyCsc1H_-gAx-zz57tchkgl9IkmorJN-Vy4",authDomain:"coocon-pang.firebaseapp.com",databaseURL:"https://coocon-pang-default-rtdb.firebaseio.com",projectId:"coocon-pang",storageBucket:"coocon-pang.firebasestorage.app",messagingSenderId:"444871641277",appId:"1:444871641277:web:1845975485049218ff0fd4"},d=(0,c.C6)().length?(0,c.Mq)():(0,c.ZF)(i);i.databaseURL||console.error("Firebase Database URL is missing! Check your .env file.");let u=(0,l.N8)(d);function g(){let[e,t]=(0,a.useState)(""),[n,r]=(0,a.useState)(""),[c,i]=(0,a.useState)(!1),[d,g]=(0,a.useState)("동료님");(0,a.useEffect)(()=>{let e=localStorage.getItem("coocon-pang-nickname");e&&r(e),(async()=>{try{let e=await window.ipc.invoke("get-username");g(e)}catch(e){console.error("Failed to get username",e)}})();let t=(0,l.iH)(u,"pang_events"),n=(0,l.yv)(t,e=>{let t=e.val();t&&window.ipc.send("trigger-pang",t)});return()=>n()},[]);let p=async()=>{if(e.trim()){!c&&n.trim()&&localStorage.setItem("coocon-pang-nickname",n);try{let s=(0,l.iH)(u,"pang_events");await (0,l.VF)(s,{text:e,sender:c?"익명의 요정":"".concat(n||"익명","(").concat(d,")"),isAnonymous:c,timestamp:(0,l.Bt)()}),t(""),window.ipc.send("hide-sender",null)}catch(e){console.error("Error sending message:",e)}}};return(0,s.jsxs)(a.Fragment,{children:[(0,s.jsx)(o(),{children:(0,s.jsx)("title",{children:"쿠콘팡 - 메시지 보내기"})}),(0,s.jsxs)("div",{className:"flex flex-col h-screen bg-[#F7F9FC] border-2 border-[#00479B] p-4 rounded-lg overflow-hidden shadow-2xl",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("img",{src:"/images/logo-icon.png",alt:"Logo",className:"w-6 h-6"}),(0,s.jsx)("span",{className:"font-bold text-[#00479B]",children:"쿠콘팡! 소식 쏘기"})]}),(0,s.jsx)("button",{onClick:()=>window.ipc.send("hide-sender",null),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)("span",{className:"text-xs font-semibold text-gray-500 w-12",children:"보내는 이"}),(0,s.jsx)("input",{type:"text",placeholder:"이름 입력 (예: 홍길동)",className:"flex-1 px-3 py-1.5 border border-gray-200 rounded text-sm focus:outline-none focus:ring-1 focus:ring-[#36A3D1] text-gray-900",value:n,onChange:e=>r(e.target.value),disabled:c}),(0,s.jsxs)("span",{className:"text-xs text-gray-400",children:["(",d,")"]})]}),(0,s.jsx)("textarea",{autoFocus:!0,className:"flex-1 w-full p-3 border rounded-md focus:outline-none focus:ring-2 transition-all resize-none text-sm text-gray-900 bg-white ".concat(c?"border-purple-300 focus:ring-purple-400":"border-gray-200 focus:ring-[#36A3D1]"),placeholder:c?"익명의 요정이 되어 소식을 전해보세요!":"나누고 싶은 기쁜 소식을 적어주세요! (최대 50자)",maxLength:50,value:e,onChange:e=>t(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),p()),"Escape"===e.key&&window.ipc.send("hide-sender",null)}}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer text-xs text-gray-600",children:[(0,s.jsx)("input",{type:"checkbox",checked:c,onChange:e=>i(e.target.checked),className:"accent-purple-500"}),"익명으로 쏘기"]}),(0,s.jsx)("button",{onClick:p,className:"px-6 py-2 rounded-md font-bold text-sm transition-all shadow-md active:scale-95 ".concat(c?"bg-[#9333ea] text-white hover:bg-[#7e22ce]":"bg-[#00479B] text-white hover:bg-[#0B3D91]"),children:c?"비밀스럽게 팡! \uD83E\uDDDA":"팡! 발사 \uD83D\uDE80"})]})]})]})}}},function(e){e.O(0,[701,645,888,774,179],function(){return e(e.s=4378)}),_N_E=e.O()}]);